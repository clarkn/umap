/*
Copyright (c) 2012, Jason Sanford
All rights reserved.
*/
var GeoJSON=(function(){var a=function(c,b){return this.parseJson(c,b)};a.prototype.parseJson=function(d,b,c){b=b||{};c=d.properties||c||{};var e=[];var f=this;switch(d.type){case"FeatureCollection":if(d.features){_(d.features).each(function(g){e.push(f.createFeature(g.geometry,b,c))});return e}break;case"GeometryCollection":if(d.geometries){_(d.geometries).each(function(g){e.push(f.createFeature(g,b,c))});return e}break;case"Feature":if(d.geometry){return f.createFeature(d.geometry,b,c)}break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":if(d.coordinates){return f.createFeature(d,b,c)}break}return null};a.prototype.createFeature=function(d,b,c){switch(d.type){case"Point":return this.point(d,b,c);case"MultiPoint":return this.multiPoint(d,b,c);case"LineString":return this.lineString(d,b,c);case"MultiLineString":return this.multiLineString(d,b,c);case"Polygon":return this.polygon(d,b,c);case"MultiPolygon":return this.multiPolygon(d,b,c);case"GeometryCollection":return this.parseJson(d,b,c)}};a.prototype.point=function(e,c,d){var b;c=_(c).clone();d=_(d).clone();var g=_(e.coordinates).isUndefined()?e:e.coordinates;c.position=new google.maps.LatLng(g[1],g[0]);if(d.style&&d.style.iconStyle){c.icon=d.style.iconStyle.url}b=new google.maps.Marker(c);b.properties=d;b.properties.type=d.type?d.type:"Point";var f=new google.maps.LatLngBounds();f.extend(c.position);b.properties.bounds=f;return b};a.prototype.multiPoint=function(d,b,c){var f=[];b=_(b).clone();c=_(c).clone();var e=this;_(d.coordinates).each(function(g){f.push(e.point(g,b,c))});return f};a.prototype.lineString=function(e,c,d){var g=[],b;c=_(c).clone();d=_(d).clone();var h=_(e.coordinates).isUndefined()?e:e.coordinates;var f=new google.maps.LatLngBounds();_(h).each(function(j){var i=new google.maps.LatLng(j[1],j[0]);f.extend(i);g.push(i)});c.path=g;b=new google.maps.Polyline(c);b.properties=d;b.properties.type=d.type?d.type:"LineString";b.properties.bounds=f;return b};a.prototype.multiLineString=function(e,c,d){var b=[],g;c=_(c).clone();d=_(d).clone();var f=this;_(e.coordinates).each(function(h){b.push(f.lineString(h,c,d))});return b};a.prototype._clockwise=function(f){var e=0,c;for(var d=0;d<f.length;d++){c=(d+1)%f.length;e+=f[d].lat()*f[c].lng();e-=f[c].lat()*f[d].lng()}e/=2;var b=e>0;return b};a.prototype.polygon=function(j,m,e){var k=[],l,f;var g;var c,i;m=_(m).clone();e=_(e).clone();var b=new google.maps.LatLngBounds();var h=_(j.coordinates).isUndefined()?j:j.coordinates;var d=this;_(h).each(function(n){l=[];_(n).each(function(p){var o=new google.maps.LatLng(p[1],p[0]);b.extend(o);l.push(o)});f=k.length;if(f===0){c=d._clockwise(l);k.push(l)}else{if(f===1){i=d._clockwise(l)}k[f]=(i===c)?l.reverse():l}});m.paths=k;g=new google.maps.Polygon(m);g.properties=e;g.properties.type=e.type?e.type:"Polygon";g.properties.bounds=b;return g};a.prototype.multiPolygon=function(f,c,e){var b=[],d;c=_(c).clone();e=_(e).clone();var g=this;_(f.coordinates).each(function(h){b.push(g.polygon(h,c,e))});return b};return a}());